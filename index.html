<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SpinBox | RGB Генератор</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              mono: ['JetBrains Mono', 'monospace'],
            },
            colors: {
              brand: {
                50: '#f0f9ff',
                100: '#e0f2fe',
                200: '#bae6fd',
                300: '#7dd3fc',
                400: '#38bdf8',
                500: '#0ea5e9',
                600: '#0284c7',
                700: '#0369a1',
                800: '#075985',
                900: '#0c4a6e',
                950: '#082f49',
              }
            }
          }
        }
      }
    </script>
    <style>
      body {
        background-color: #020617;
        color: #e2e8f0;
      }
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #0f172a; 
      }
      ::-webkit-scrollbar-thumb {
        background: #334155; 
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #475569; 
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.1",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.556.0",
    "react/": "https://aistudiocdn.com/react@^19.2.1/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // --- ICONS (Inlined to avoid external dependencies) ---
        
        const IconBase = ({ children, className }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="24" 
                height="24" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const Zap = (props) => (
            <IconBase {...props}>
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
            </IconBase>
        );

        const Type = (props) => (
            <IconBase {...props}>
                <polyline points="4 7 4 4 20 4 20 7" />
                <line x1="9" x2="15" y1="20" y2="20" />
                <line x1="12" x2="12" y1="4" y2="20" />
            </IconBase>
        );

        const Palette = (props) => (
            <IconBase {...props}>
                <circle cx="13.5" cy="6.5" r=".5" fill="currentColor" />
                <circle cx="17.5" cy="10.5" r=".5" fill="currentColor" />
                <circle cx="8.5" cy="7.5" r=".5" fill="currentColor" />
                <circle cx="6.5" cy="12.5" r=".5" fill="currentColor" />
                <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z" />
            </IconBase>
        );

        const Sparkles = (props) => (
            <IconBase {...props}>
                <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />
                <path d="M5 3v4" />
                <path d="M9 3v4" />
                <path d="M3 5h4" />
                <path d="M3 9h4" />
            </IconBase>
        );

        const Eye = (props) => (
            <IconBase {...props}>
                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
                <circle cx="12" cy="12" r="3" />
            </IconBase>
        );

        const Code = (props) => (
            <IconBase {...props}>
                <polyline points="16 18 22 12 16 6" />
                <polyline points="8 6 2 12 8 18" />
            </IconBase>
        );

        const Copy = (props) => (
            <IconBase {...props}>
                <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
                <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
            </IconBase>
        );

        const Check = (props) => (
            <IconBase {...props}>
                <path d="M20 6 9 17l-5-5" />
            </IconBase>
        );

        // --- TYPES & CONSTANTS ---

        const TextEffect = {
            NONE: 'none',
            BOLD: 'bold',
            ITALIC: 'italic',
            UNDERLINE: 'underline',
            STRIKETHROUGH: 'strikethrough'
        };

        const smallCapsMap = {
            'a': 'ᴀ', 'b': 'ʙ', 'c': 'ᴄ', 'd': 'ᴅ', 'e': 'ᴇ',
            'f': 'ғ', 'g': 'ɢ', 'h': 'ʜ', 'i': 'ɪ', 'j': 'ᴊ',
            'k': 'ᴋ', 'l': 'ʟ', 'm': 'ᴍ', 'n': 'ɴ', 'o': 'ᴏ',
            'p': 'ᴘ', 'q': 'ǫ', 'r': 'ʀ', 's': 's', 't': 'ᴛ',
            'u': 'ᴜ', 'v': 'ᴠ', 'w': 'ᴡ', 'x': 'x', 'y': 'ʏ',
            'z': 'ᴢ'
        };

        // --- UTILS ---

        const toSmallCaps = (text) => {
            return text.split('').map(char => {
                const lowerChar = char.toLowerCase();
                return smallCapsMap[lowerChar] || char;
            }).join('');
        };

        const hexToRgb = (hex) => {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : { r: 0, g: 0, b: 0 };
        };

        const componentToHex = (c) => {
            const hex = Math.round(c).toString(16);
            return hex.length === 1 ? "0" + hex : hex;
        };

        const rgbToHex = (r, g, b) => {
            return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
        };

        const interpolateColor = (color1, color2, factor) => {
            const c1 = hexToRgb(color1);
            const c2 = hexToRgb(color2);

            const r = c1.r + factor * (c2.r - c1.r);
            const g = c1.g + factor * (c2.g - c1.g);
            const b = c1.b + factor * (c2.b - c1.b);

            return rgbToHex(r, g, b);
        };

        const getFormatCode = (effect) => {
            switch (effect) {
                case TextEffect.BOLD: return '&l';
                case TextEffect.ITALIC: return '&o';
                case TextEffect.UNDERLINE: return '&n';
                case TextEffect.STRIKETHROUGH: return '&m';
                default: return '';
            }
        };

        const generateGradient = (text, startColor, endColor, effect) => {
            if (!text) return [];

            const smallText = toSmallCaps(text);
            const result = [];
            const formatCode = getFormatCode(effect);

            for (let i = 0; i < smallText.length; i++) {
                const ratio = smallText.length > 1 ? i / (smallText.length - 1) : 0;
                const hexColor = interpolateColor(startColor, endColor, ratio);
                const cleanHex = hexColor.replace('#', '');
                
                // Format: &x&r&r&g&g&b&b
                const mcColor = `&x&${cleanHex[0]}&${cleanHex[1]}&${cleanHex[2]}&${cleanHex[3]}&${cleanHex[4]}&${cleanHex[5]}`;
                
                result.push({
                    char: smallText[i],
                    originalChar: text[i] || '',
                    color: hexColor,
                    minecraftCode: `${mcColor}${formatCode}${smallText[i]}`
                });
            }

            return result;
        };

        // --- COMPONENTS ---

        const ControlPanel = ({
            text,
            setText,
            startColor,
            setStartColor,
            endColor,
            setEndColor,
            effect,
            setEffect
        }) => {
            return (
                <div className="bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6 shadow-2xl space-y-6">
                    <div className="flex items-center gap-2 mb-4 border-b border-slate-800 pb-4">
                        <div className="p-2 bg-brand-500/10 rounded-lg">
                            <Palette className="w-5 h-5 text-brand-400" />
                        </div>
                        <h2 className="text-lg font-semibold text-white">Настройки</h2>
                    </div>

                    {/* Text Input */}
                    <div className="space-y-2">
                        <label className="text-sm font-medium text-slate-400 flex items-center gap-2">
                            <Type className="w-4 h-4" /> Текст
                        </label>
                        <input
                            type="text"
                            value={text}
                            onChange={(e) => setText(e.target.value)}
                            placeholder="Введите что-нибудь..."
                            className="w-full bg-slate-950/50 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-brand-500 transition-all"
                        />
                        <p className="text-xs text-slate-500">Текст автоматически преобразуется в мелкий шрифт.</p>
                    </div>

                    {/* Colors */}
                    <div className="grid grid-cols-2 gap-4">
                        <div className="space-y-2">
                            <label className="text-sm font-medium text-slate-400">Начальный цвет</label>
                            <div className="flex items-center gap-2 bg-slate-950/50 border border-slate-700 rounded-xl p-2 focus-within:ring-2 focus-within:ring-brand-500/50 transition-all">
                                <input
                                    type="color"
                                    value={startColor}
                                    onChange={(e) => setStartColor(e.target.value)}
                                    className="w-8 h-8 rounded cursor-pointer border-none bg-transparent p-0"
                                />
                                <input 
                                    type="text" 
                                    value={startColor}
                                    onChange={(e) => setStartColor(e.target.value)}
                                    className="bg-transparent text-sm font-mono text-slate-300 focus:outline-none w-full uppercase"
                                />
                            </div>
                        </div>

                        <div className="space-y-2">
                            <label className="text-sm font-medium text-slate-400">Конечный цвет</label>
                            <div className="flex items-center gap-2 bg-slate-950/50 border border-slate-700 rounded-xl p-2 focus-within:ring-2 focus-within:ring-brand-500/50 transition-all">
                                <input
                                    type="color"
                                    value={endColor}
                                    onChange={(e) => setEndColor(e.target.value)}
                                    className="w-8 h-8 rounded cursor-pointer border-none bg-transparent p-0"
                                />
                                <input 
                                    type="text" 
                                    value={endColor}
                                    onChange={(e) => setEndColor(e.target.value)}
                                    className="bg-transparent text-sm font-mono text-slate-300 focus:outline-none w-full uppercase"
                                />
                            </div>
                        </div>
                    </div>

                    {/* Effects */}
                    <div className="space-y-2">
                        <label className="text-sm font-medium text-slate-400 flex items-center gap-2">
                            <Sparkles className="w-4 h-4" /> Эффекты текста
                        </label>
                        <div className="grid grid-cols-3 gap-2">
                            {[
                                { label: 'Нет', value: TextEffect.NONE },
                                { label: 'Жирный', value: TextEffect.BOLD },
                                { label: 'Курсив', value: TextEffect.ITALIC },
                                { label: 'Подчерк.', value: TextEffect.UNDERLINE },
                                { label: 'Зачерк.', value: TextEffect.STRIKETHROUGH },
                            ].map((opt) => (
                                <button
                                    key={opt.value}
                                    onClick={() => setEffect(opt.value)}
                                    className={`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 border ${
                                        effect === opt.value
                                            ? 'bg-brand-600/20 text-brand-300 border-brand-500/50 shadow-[0_0_15px_rgba(14,165,233,0.15)]'
                                            : 'bg-slate-800/50 text-slate-400 border-slate-700 hover:bg-slate-800 hover:border-slate-600'
                                    }`}
                                >
                                    {opt.label}
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const PreviewPanel = ({ generatedData, effect }) => {
            const [copied, setCopied] = useState(false);

            const rawCode = generatedData.map(d => d.minecraftCode).join('');

            const handleCopy = async () => {
                if (!rawCode) return;
                try {
                    await navigator.clipboard.writeText(rawCode);
                    setCopied(true);
                    setTimeout(() => setCopied(false), 2000);
                } catch (err) {
                    console.error('Failed to copy', err);
                }
            };

            const getTextStyle = () => {
                const base = {};
                if (effect === TextEffect.BOLD) base.fontWeight = 'bold';
                if (effect === TextEffect.ITALIC) base.fontStyle = 'italic';
                if (effect === TextEffect.UNDERLINE) base.textDecoration = 'underline';
                if (effect === TextEffect.STRIKETHROUGH) base.textDecoration = 'line-through';
                return base;
            };

            const isEmpty = generatedData.length === 0;

            return (
                <div className="flex flex-col gap-6">
                    {/* Visual Preview */}
                    <div className="bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6 shadow-2xl flex flex-col h-full min-h-[200px]">
                        <div className="flex items-center gap-2 mb-4 border-b border-slate-800 pb-4">
                            <div className="p-2 bg-purple-500/10 rounded-lg">
                                <Eye className="w-5 h-5 text-purple-400" />
                            </div>
                            <h2 className="text-lg font-semibold text-white">Предпросмотр</h2>
                        </div>
                        
                        <div className="flex-1 flex items-center justify-center p-8 bg-slate-950/30 rounded-xl border border-slate-800/50 overflow-auto">
                            {isEmpty ? (
                                <span className="text-slate-600 italic">Предпросмотр появится здесь...</span>
                            ) : (
                                <div className="text-3xl md:text-4xl text-center break-words w-full" style={getTextStyle()}>
                                    {generatedData.map((item, idx) => (
                                        <span 
                                            key={idx} 
                                            style={{ color: item.color, textShadow: `0 0 20px ${item.color}40` }}
                                            className="transition-colors duration-200"
                                        >
                                            {item.char}
                                        </span>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>

                    {/* Code Output */}
                    <div className="bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6 shadow-2xl relative overflow-hidden group">
                        <div className="flex items-center justify-between mb-4 border-b border-slate-800 pb-4">
                            <div className="flex items-center gap-2">
                                <div className="p-2 bg-emerald-500/10 rounded-lg">
                                    <Code className="w-5 h-5 text-emerald-400" />
                                </div>
                                <h2 className="text-lg font-semibold text-white">Сгенерированный код</h2>
                            </div>
                            <button
                                onClick={handleCopy}
                                disabled={isEmpty}
                                className={`flex items-center gap-2 px-4 py-1.5 rounded-lg text-sm font-medium transition-all ${
                                    copied 
                                        ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/20' 
                                        : 'bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white border border-slate-700'
                                } disabled:opacity-50 disabled:cursor-not-allowed`}
                            >
                                {copied ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                                {copied ? 'Скопировано!' : 'Копировать'}
                            </button>
                        </div>

                        <div className="relative">
                            <pre className="font-mono text-sm bg-slate-950/50 p-4 rounded-xl border border-slate-800 text-slate-300 overflow-x-auto min-h-[80px] whitespace-pre-wrap break-all leading-relaxed">
                                {isEmpty ? <span className="text-slate-600">// Код появится здесь...</span> : rawCode}
                            </pre>
                        </div>
                        
                        {/* Decorative glow effect */}
                        <div className="absolute -bottom-20 -right-20 w-40 h-40 bg-brand-500/10 rounded-full blur-3xl pointer-events-none group-hover:bg-brand-500/20 transition-all duration-500" />
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---

        const App = () => {
            const [text, setText] = useState('');
            const [startColor, setStartColor] = useState('#4FC3F7');
            const [endColor, setEndColor] = useState('#0288D1');
            const [effect, setEffect] = useState(TextEffect.NONE);

            const generatedData = useMemo(() => {
                return generateGradient(text, startColor, endColor, effect);
            }, [text, startColor, endColor, effect]);

            return (
                <div className="min-h-screen relative overflow-hidden text-slate-200 font-sans selection:bg-brand-500/30 selection:text-brand-100">
                    
                    {/* Background Decor */}
                    <div className="fixed inset-0 z-0 pointer-events-none">
                        <div className="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] rounded-full bg-brand-600/10 blur-[120px]" />
                        <div className="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] rounded-full bg-purple-600/10 blur-[120px]" />
                        <div className="absolute top-[40%] left-[40%] w-[20%] h-[20%] rounded-full bg-emerald-600/5 blur-[100px]" />
                    </div>

                    <div className="relative z-10 container mx-auto px-4 py-8 md:py-12 max-w-6xl">
                        {/* Header */}
                        <header className="text-center mb-12">
                            <div className="inline-flex items-center gap-2 mb-4">
                                <div className="p-3 bg-gradient-to-br from-brand-400 to-brand-600 rounded-2xl shadow-lg shadow-brand-500/20">
                                    <Zap className="w-8 h-8 text-white" fill="currentColor" />
                                </div>
                            </div>
                            <h1 className="text-5xl md:text-6xl font-black tracking-tight text-white mb-4 drop-shadow-[0_0_15px_rgba(255,255,255,0.1)]">
                                <span className="bg-clip-text text-transparent bg-gradient-to-r from-brand-300 via-brand-400 to-brand-500">
                                    SpinBox
                                </span>
                            </h1>
                            <p className="text-lg text-slate-400 max-w-lg mx-auto leading-relaxed">
                                Создавайте потрясающие RGB градиенты для текста Minecraft с автоматическим преобразованием в мелкий шрифт.
                            </p>
                        </header>

                        {/* Main Content */}
                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
                            <div className="lg:col-span-5">
                                <ControlPanel 
                                    text={text}
                                    setText={setText}
                                    startColor={startColor}
                                    setStartColor={setStartColor}
                                    endColor={endColor}
                                    setEndColor={setEndColor}
                                    effect={effect}
                                    setEffect={setEffect}
                                />
                            </div>
                            
                            <div className="lg:col-span-7">
                                <div className="sticky top-8">
                                    <PreviewPanel 
                                        generatedData={generatedData}
                                        effect={effect}
                                    />
                                </div>
                            </div>
                        </div>

                        {/* Footer */}
                        <footer className="mt-20 text-center border-t border-slate-800/50 pt-8">
                            <p className="text-slate-500 text-sm">
                                Создано с <span className="text-brand-500">♥</span> для сообщества.
                            </p>
                        </footer>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
